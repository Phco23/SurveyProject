@model IEnumerable<SurveyProject.Models.ViewModels.SurveyViewModel>

<div class="container mt-4">
    @if (!Model.Any())
    {
        <p class="text-center text-muted">No surveys are currently available.</p>
    }
    else
    {
        <!-- Header -->
        <app-quickpoll-header-nav-tabs class="container py-4">
            <!-- Header Title -->
            <div class="mb-4">
                <h2 class="page-title text-primary fw-bold">Surveys</h2>
                <p class="page-title-subtitle text-muted">
                    Participate, leave a comment in Survey!
                </p>
            </div>

            <!-- Navigation Tabs -->
            <div class="events-nav">
                <ul class="nav nav-tabs ">
                    <li class="nav-item">
                        <a asp-controller="Survey" asp-action="ListSurvey" class="nav-link active">
                            <i class="bi bi-clipboard-check"></i> Active Surveys
                        </a>
                    </li>
                    <li class="nav-item">
                        <a asp-controller="Survey" asp-action="ExpiredSurvey" class="nav-link">
                            <i class="bi bi-clipboard-x"></i> Expired Surveys
                        </a>
                    </li>
                </ul>
            </div>
        </app-quickpoll-header-nav-tabs>

        <!-- Active SURVEYS START-->
                <div class="container-xxl py-6">
                    <div class="container">
                        <div class="row g-4">
                            @{
                                int i = 1;
                            }
                            @foreach (var survey in Model.Where(s => s.IsActive && s.ExpiredDate >= DateTime.UtcNow))
                            {
                                <!-- Survey Item 1 -->
                                <div class="col-lg-5 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                                    <div class="card border-0 shadow-sm">
                                        <img class="img-fluid" src="/img/E_0.webp" alt="image_Survey" loading="lazy" style="margin: 10px 10px 10px 10px;">
                                        <div class="card-body" style="background-color: #F9F9F9;margin: 10px 10px 10px 10px;">
                                            <h5 class="card-title text-center">@survey.Title</h5>
                                            <!-- Survey Details -->
                                            <div class="d-flex justify-content-between px-4">
                                                <div class="left text-start"> 
                                                    <p class="mb-2">No.</p>
                                                    <p class="mb-2">Questions</p>
                                                    <p class="mb-2">Time</p>
                                                    <p class="mb-2">Status</p>
                                                </div>
                                                <div class="right text-end">
                                                    <p class="mb-2">@i</p>
                                                    <p class="mb-2">12</p>
                                                    <p class="mb-2">5 minutes</p>
                                                    <p class="mb-2" style="color: #28a745;">Active</p>
                                                </div>
                                            </div>
                                            <div class="text-center">
                                                <p class="mb-2">
                                                        <i class="bi bi-calendar-event me-1 text-primary"></i> 
                                                        @DateTime.Now.ToString("MM/dd/yyyy")
                                                        <span class="mx-2">--</span>
                                                        <i class="bi bi-calendar-x me-1 text-danger"></i> 
                                                        @survey.ExpiredDate.ToString("MM/dd/yyyy")
                                                </p>
                                            </div>
                                            <a asp-action="SurveyDetails" asp-route-id="@survey.SurveyId" class="btn btn-primary" style="width: 100%; border-radius: 10px;">
                                                Participate Now
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <!-- --- -->
                                i++;
                            }
                            
                        </div>
                    </div>
                </div>
        <!-- Active SURVEYS END-->
    }
</div>
<!-- Feedback Start -->
<div class="container-xxl py-5 bg-light category">
    <div class="container">
        <!-- Section Title -->
        <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
            <h1 class="section-title text-primary text-center px-3">
                <i class="bi bi-chat-dots me-2"></i> Submit Your Feedback
            </h1>
            <p class="mt-3 text-secondary">We value your feedback to improve our services.</p>
        </div>

        <!-- Feedback Form -->
        <section class="mt-5">
            <!-- Form -->
            <form class="p-4 border rounded shadow bg-white"
                  asp-area="Admin"
                  asp-controller="Feedback"
                  asp-action="SubmitFeedback"
                  method="post">
                <div class="mb-3">
                    <label for="feedback" class="form-label fw-bold">Your Feedback</label>
                    <textarea id="feedback"
                              name="Content"
                              class="form-control border-primary"
                              rows="5"
                              placeholder="Enter your feedback"
                              required></textarea>
                </div>
                <!-- Submit Button -->
                <button type="submit" class="btn btn-primary">Submit Feedback </button>
            </form>
        </section>
    </div>
</div>
<!-- Feedback End -->
